<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Madurez AppSec LATAM</title>

<!-- CSP segura: permite APENAS este script (nonce). Sem rede, sem iframes, sem objetos. -->
<meta http-equiv="Content-Security-Policy"
      content="default-src 'self';
               script-src 'self' 'nonce-cr001';
               style-src 'self' 'unsafe-inline';
               connect-src 'none';
               img-src 'self' data:;
               object-src 'none';
               base-uri 'none';
               frame-ancestors 'none'">

<meta name="referrer" content="no-referrer" />
<meta http-equiv="X-Content-Type-Options" content="nosniff" />

<style>
  :root{color-scheme:light dark}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;padding:20px;line-height:1.4}
  .wrap{max-width:900px;margin:auto}
  .card{border:1px solid rgba(127,127,127,.35);border-radius:14px;padding:16px;margin-bottom:14px}
  h1{margin:0 0 6px;font-size:1.3rem}
  .sub{opacity:.85;margin:0 0 6px}
  .sig{opacity:.85;margin:0 0 10px;font-size:.92rem}
  .muted{opacity:.8;font-size:.9rem;margin:8px 0 0}
  .q{margin-top:14px;padding-top:12px;border-top:1px dashed rgba(127,127,127,.35)}
  .q:first-child{border-top:0;padding-top:0}
  .opt{display:flex;gap:10px;padding:8px;border:1px solid rgba(127,127,127,.25);border-radius:10px;margin-top:6px;align-items:flex-start}
  .opt input{margin-top:2px}
  button{font:inherit;padding:10px 12px;border-radius:10px;border:1px solid rgba(127,127,127,.45);background:transparent;cursor:pointer}
  button:disabled{opacity:.55;cursor:not-allowed}
  .score{font-size:1.1rem;font-weight:800}
  .badge{display:inline-block;padding:6px 10px;border:1px solid rgba(127,127,127,.45);border-radius:999px;font-weight:700}
</style>
</head>

<body>
<div class="wrap">

  <div class="card">
    <h1>Madurez AppSec LATAM</h1>
    <p class="sub">Evaluación de madurez en desarrollo seguro · 10 preguntas · Nota 0–10</p>
    <p class="sig">By <strong>ChessRedOffsec</strong> · Apoyo <strong>Hacktiba LATAM</strong></p>
    <p class="muted">
      Privacidad: no se recolectan datos personales ni de empresa. No cookies, no storage, no envío de datos.
    </p>
  </div>

  <form id="quiz" class="card" autocomplete="off" novalidate>
    <div id="questions"></div>
    <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
      <button id="submitBtn" type="submit" disabled>Ver resultado</button>
      <button id="resetBtn" type="button">Limpiar</button>
    </div>
    <p class="muted">Cada pregunta: Inicial (0) · Intermedio (0,5) · Avanzado (1)</p>
  </form>

  <div id="result" class="card" style="display:none">
    <div class="score" id="score"></div>
    <div style="margin-top:8px" id="level"></div>
    <p class="muted" id="hint"></p>
  </div>

</div>

<script nonce="cr001">
"use strict";

const QUESTIONS = [
  "1) ¿Existe un plan estratégico formal de AppSec?",
  "2) ¿Se realizan pentests de forma regular?",
  "3) ¿Las aplicaciones están protegidas por WAF o controles perimetrales?",
  "4) ¿Existen controles de seguridad para APIs (autenticación, rate limit, validación)?",
  "5) ¿Existen prácticas de seguridad para adopción de IA?",
  "6) ¿Hay entrenamientos de seguridad para desarrolladores?",
  "7) ¿Se aplican prácticas de seguridad directamente en la IDE?",
  "8) ¿Las aplicaciones cloud siguen prácticas de seguridad definidas?",
  "9) ¿Existen controles de seguridad en las pipelines CI/CD?",
  "10) ¿Existen requisitos de seguridad y modelado de amenazas?"
];

const ANSWERS = [
  ["Inicial (0)", 0],
  ["Intermedio (0,5)", 0.5],
  ["Avanzado (1)", 1]
];

const state = { scores: new Array(QUESTIONS.length).fill(null) };
const $ = (id) => document.getElementById(id);
const answeredAll = () => state.scores.every(v => v !== null);

function renderQuestions(){
  const box = $("questions");
  box.innerHTML = "";

  QUESTIONS.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "q";
    div.innerHTML = `<strong>${q}</strong>`;

    ANSWERS.forEach(([label, value]) => {
      const opt = document.createElement("label");
      opt.className = "opt";

      const input = document.createElement("input");
      input.type = "radio";
      input.name = `q${i}`;
      input.addEventListener("change", () => {
        state.scores[i] = value;
        $("submitBtn").disabled = !answeredAll();
      });

      const txt = document.createElement("div");
      txt.textContent = label;

      opt.appendChild(input);
      opt.appendChild(txt);
      div.appendChild(opt);
    });

    box.appendChild(div);
  });
}

function classify(score){
  if(score <= 3.5) return ["Básico", "Prioriza fundamentos: controles mínimos, disciplina y consistencia."];
  if(score <= 7.0) return ["En evolución", "Buen progreso: estandariza prácticas y refuerza controles."];
  return ["Maduro", "Excelente: foco en consistencia, métricas y mejora continua."];
}

$("quiz").addEventListener("submit", (e) => {
  e.preventDefault();
  if(!answeredAll()) return;

  const total = Math.round(state.scores.reduce((a,b)=>a+b,0) * 10) / 10;
  const [lvl, hint] = classify(total);

  $("score").textContent = `Nota: ${total} / 10`;
  $("level").innerHTML = `<span class="badge">Nivel: ${lvl}</span>`;
  $("hint").textContent = hint;

  $("result").style.display = "block";
  window.scrollTo({ top: $("result").offsetTop - 10, behavior: "smooth" });
});

$("resetBtn").addEventListener("click", () => {
  state.scores.fill(null);
  $("quiz").reset();
  $("submitBtn").disabled = true;
  $("result").style.display = "none";
});

renderQuestions();
</script>
</body>
</html>
